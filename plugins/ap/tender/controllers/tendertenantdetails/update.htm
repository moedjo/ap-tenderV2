<?php if (!$this->fatalError): ?>

<?= Form::open(['class' => 'layout']) ?>

<div class="layout-row">
    <?= $this->formRender() ?>
</div>

<div class="form-buttons">
    <div class="loading-indicator-container">

        
        <?php if($formModel->status == 'payment_rfp' && $this->user->hasPermission('ap_tender_is_finance')): ?>
        <button type="button btn-default" data-request="onSave" 
            data-hotkey="ctrl+enter, cmd+enter" data-load-indicator="<?= e(trans('ap.tender::lang.button.next')) ?>"
            class="btn btn-primary pull-right" data-request-confirm="<?= e(trans('ap.tender::lang.button.confirm_send')) ?>">
            <?= e(trans('ap.tender::lang.button.submit')) ?>
        </button>
        <?php endif ?>

        <?php if($formModel->status == 'submit_document' && $this->user->hasPermission('ap_tender_is_admin_envelope1')): ?>
        <button type="button btn-default" data-request="onSave" 
            data-hotkey="ctrl+enter, cmd+enter" data-load-indicator="<?= e(trans('ap.tender::lang.button.next')) ?>"
            class="btn btn-primary pull-right" data-request-confirm="<?= e(trans('ap.tender::lang.button.confirm_send')) ?>">
            <?= e(trans('ap.tender::lang.button.submit')) ?>
        </button>
        <?php endif ?>

        <?php if($formModel->status == 'envelope1_approve' && $this->user->hasPermission('ap_tender_is_admin_envelope2')): ?>
        <button type="button btn-default" data-request="onSave" 
            data-hotkey="ctrl+enter, cmd+enter" data-load-indicator="<?= e(trans('ap.tender::lang.button.next')) ?>"
            class="btn btn-primary pull-right" data-request-confirm="<?= e(trans('ap.tender::lang.button.confirm_send')) ?>">
            <?= e(trans('ap.tender::lang.button.submit')) ?>
        </button>
        <?php endif ?>

        <?php if($formModel->status == 'aanwijzing' && $this->user->hasPermission('ap_tender_is_admin_tender')): ?>
        <button type="button btn-default" data-request="onSave" 
            data-hotkey="ctrl+enter, cmd+enter" data-load-indicator="<?= e(trans('ap.tender::lang.button.next')) ?>"
            class="btn btn-primary pull-right" data-request-confirm="<?= e(trans('ap.tender::lang.button.confirm_send')) ?>">
            <?= e(trans('ap.tender::lang.button.submit')) ?>
        </button>
        <?php endif ?>

        <a href="<?= Backend::url('ap/tender/tendertenantdetails') ?>" class="btn btn-warning">
            <?= e(trans('ap.tender::lang.button.back')) ?>
        </a>
    </div>
</div>
<?= Form::close() ?>

<?php else: ?>
<p class="flash-message static error">
    <?= e(trans($this->fatalError)) ?>
</p>
<p><a href="<?= Backend::url('ap/tender/tenders') ?>" class="btn btn-default">
        <?= e(trans('backend::lang.form.return_to_list')) ?>
    </a></p>
<?php endif ?>